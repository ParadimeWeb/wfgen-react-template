import{q as N,p as y,k as C,h as R,o as e,t as g,m as d,aQ as I,x as p,aR as D,aS as v,aT as x,w as n,f as M,aU as P,aV as U}from"./index-DImuVcwS.js";import{A as j}from"./Avatar-C1MThYth.js";import{C as m,a as L}from"./ChatMessage-BbdB-tDo.js";import"./AvatarContext-0sxnNic9.js";import"./useFocusableGroup-C6-_PH2u.js";const b=N({chatMessage:{whiteSpace:"pre-wrap"},chatPendingMessage:{borderLeftColor:n.colorNeutralForeground4},chatPendingDecorationIcon:{backgroundColor:n.colorNeutralForeground2},chatPendingDecorationLabel:{color:n.colorNeutralForeground3},chatRejectionMessage:{borderLeftColor:n.colorPaletteRedBorder1},chatRejectionDecorationIcon:{backgroundColor:n.colorPaletteRedBackground3},chatRejectionDecorationLabel:{color:n.colorPaletteRedForeground1},chatApprovalMessage:{borderLeftColor:n.colorPaletteGreenBorder1},chatApprovalDecorationIcon:{backgroundColor:n.colorPaletteGreenBackground3},chatApprovalDecorationLabel:{color:n.colorPaletteGreenForeground1},otherChatMessage:{paddingTop:"2px",paddingBottom:"2px"}});function A({comments:t,approval:a}){const o=b(),{timeZoneInfo:c}=C(),h=a.ApprovedByUserName??a.ApproverUserName??"";return e.jsx(L,{children:t.map((r,s)=>r.Type==="REJECTION"?e.jsx(m,{root:{className:o.otherChatMessage},body:{className:d(o.chatMessage,o.chatRejectionMessage)},author:h!==r.UserName?r.Author:null,decorationLabel:{className:o.chatRejectionDecorationLabel},decorationIcon:{className:o.chatRejectionDecorationIcon,children:e.jsx(x,{})},timestamp:g(r.Created).utcOffset(c.UTCOffset).format("LLL"),children:r.Comment},`chatMessage-${s}`):e.jsx(m,{root:{className:o.otherChatMessage},body:{className:d(o.chatMessage,o.chatApprovalMessage)},author:h!==r.UserName?r.Author:null,decorationLabel:{className:o.chatApprovalDecorationLabel},decorationIcon:{className:o.chatApprovalDecorationIcon,children:e.jsx(x,{})},timestamp:g(r.Created).utcOffset(c.UTCOffset).format("LLL"),children:r.Comment},`chatMessage-${s}`))})}const F=({approval:t})=>{const a=b(),{t:o}=y(),{timeZoneInfo:c}=C(),{form:h}=R(),r=t.ApprovedByName??t.ApproverName??o("Unassigned"),s=t.ApprovedByDirectory??t.ApproverDirectory??null;return e.jsx(h.Subscribe,{selector:l=>l.values.__Comments.filter(i=>i.Role===t.Role),children:l=>{const i=l.find(f=>f.ActivityInstId===t.ActivityInstId),u=l.filter(f=>f.ActivityInstId!==t.ActivityInstId);return t.Approval==="APPROVED"?e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatApprovalMessage)},avatar:e.jsx(j,{name:r,color:s?p.get(s):"neutral"}),author:r,decorationLabel:{className:a.chatApprovalDecorationLabel,children:t.ApprovedByUserName===t.ApproverUserName?o("Approved"):o("Approved on behalf of {{ name }}",{name:t.ApproverName})},decorationIcon:{className:a.chatApprovalDecorationIcon,children:e.jsx(I,{})},timestamp:g(t.Approved).utcOffset(c.UTCOffset).format("LLL"),children:i?i.Comment:""}),u.length>0?e.jsx(A,{comments:u,approval:t}):null]}):t.Approval==="REJECTED"?e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatRejectionMessage)},avatar:e.jsx(j,{name:r,color:s?p.get(s):"neutral"}),author:r,decorationLabel:{className:a.chatRejectionDecorationLabel,children:t.ApprovedByUserName===t.ApproverUserName?o("Rejected"):o("Rejected on behalf of {{ name }}",{name:t.ApproverName})},decorationIcon:{className:a.chatRejectionDecorationIcon,children:e.jsx(D,{})},timestamp:g(t.Approved).utcOffset(c.UTCOffset).format("LLL"),children:i?i.Comment:""}),u.length>0?e.jsx(A,{comments:u,approval:t}):null]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatPendingMessage)},avatar:e.jsx(j,{name:r,color:s?p.get(s):"neutral"}),author:r,decorationLabel:{className:a.chatPendingDecorationLabel,children:o("Pending")},decorationIcon:{className:a.chatPendingDecorationIcon,children:e.jsx(v,{})}}),l.length>0?e.jsx(A,{comments:l,approval:t}):null]})}})},O=N({root:{width:"unset",marginRight:"unset",marginLeft:"unset"}}),w=()=>{const t=O(),a=M();return e.jsx("div",{children:a.state.value.map((o,c)=>e.jsxs(e.Fragment,{children:[e.jsx(P,{children:U(o.Role)}),e.jsx(L,{className:t.root,children:e.jsx(F,{approval:o})})]},c))})};export{w as default};
//# sourceMappingURL=index-C_ZSY3fC.js.map
