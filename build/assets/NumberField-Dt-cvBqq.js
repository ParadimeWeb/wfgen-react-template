import{f as j,h as P,k as S,l as A,n as T,o as e,p as D,F as N,T as y,m as U,a0 as q,aF as w,aG as Q,aq as Y,aH as C}from"./index-DImuVcwS.js";import{usePrintStyles as M}from"./TextField-CU5_npzy.js";import"./typographyStyles-Dgw4yKBW.js";function k(l){const{printFieldProps:n=l.fieldProps,printTextProps:h={},style:c="decimal",currency:m="USD"}=l,i=M(),{t:r}=D(),s=j(),{locale:g}=S(),d=Intl.NumberFormat(g,{style:c,currency:m});return e.jsx(N,{label:r(s.name),...n,children:e.jsx(y,{className:U(i.text,(n==null?void 0:n.size)==="small"&&i.small,(n==null?void 0:n.size)==="large"&&i.large,h.className),children:s.state.value===null?"":d.format(s.state.value)})})}function B(l){var x,b;const{readonlyFieldProps:n=l.fieldProps,readonlyInputProps:h={},style:c="decimal",currency:m="USD"}=l,i=M(),{t:r}=D(),s=j(),{locale:g}=S(),{form:d}=P(),t=Intl.NumberFormat(g,{style:c,currency:m}).formatToParts(),p=((x=t.find(o=>o.type==="currency"))==null?void 0:x.value)??"",I=((b=t.find(o=>o.type==="percentSign"))==null?void 0:b.value)??"",F=Intl.NumberFormat(g,{style:c,currency:m});return e.jsx(d.Subscribe,{selector:o=>o.values.Table1[0].FORM_FIELDS_REQUIRED,children:o=>{const u=T(o).has(s.name.replace("Table1[0].",""));return e.jsx(N,{required:u,label:r(s.name),...n,children:e.jsx(q,{readOnly:!0,className:i.readonly,contentAfter:c==="currency"?e.jsx(y,{size:400,children:p}):c==="percent"?e.jsx(y,{size:400,children:I}):e.jsx(w,{}),defaultValue:s.state.value===null?"":F.format(s.state.value),...h})})}})}function G(l){var V,E;const{fieldProps:n={},readonlyFieldProps:h,readonlyInputProps:c,printFieldProps:m,printTextProps:i,style:r="decimal",currency:s="USD",...g}=l,{t:d}=D(),t=j(),{locale:p}=S(),{form:I}=P(),F=Intl.NumberFormat(p,{style:r,currency:s}).formatToParts(),x=((V=F.find(a=>a.type==="currency"))==null?void 0:V.value)??"",b=((E=F.find(a=>a.type==="percentSign"))==null?void 0:E.value)??"",o=Intl.NumberFormat(p,r==="currency"?{maximumFractionDigits:2,minimumFractionDigits:2}:r==="percent"?{maximumFractionDigits:0,minimumFractionDigits:0}:void 0),R=new Q(p),u=t.state.value===null?null:r==="percent"?t.state.value*100:t.state.value,O=Y({defaultValues:{formattedValue:u===null?"":o.format(u)},validators:{onChange:C({formattedValue:C.string.narrow(a=>{if(a.length===0)return t.handleChange(null),!0;const v=R.tryParse(a);return v===void 0?!1:(t.handleChange(r==="percent"?v/100:v),!0)}).configure({message:a=>d("{{actual}} is not a valid number",{actual:a.actual})})})}});return e.jsx(I.Subscribe,{selector:a=>a.values.Table1[0].FORM_FIELDS_REQUIRED,children:a=>{const z=T(a).has(t.name.replace("Table1[0].",""));return e.jsx(O.Field,{name:"formattedValue",children:f=>{var _;return e.jsx(N,{required:z,label:d(t.name),validationMessage:f.state.meta.isTouched&&f.state.meta.errors.length?(_=f.state.meta.errors[0])==null?void 0:_.message:t.state.meta.isTouched&&t.state.meta.errors.length>0?d(t.state.meta.errors[0],{length:t.state.meta.errors[0].rule,actual:f.state.value.length}):null,...n,children:e.jsx(q,{contentAfter:r==="currency"?e.jsx(y,{size:400,children:x}):r==="percent"?e.jsx(y,{size:400,children:b}):e.jsx(w,{}),value:f.state.value,onBlur:()=>{u!==null&&(Number.isInteger(u)||(r==="percent"?t.setValue(Math.round(u)/100):r==="currency"&&u.toString().split(".")[1].length>2&&t.setValue(Math.round(u*100)/100)),f.setValue(o.format(u)))},onChange:(H,{value:L})=>{f.handleChange(L)},...g})})}})}})}const X=l=>{const n=j(),{form:h,printForm:{state:{values:{open:c}}}}=P(),{isArchive:m}=S(),i=A(h.store,s=>s.values.Table1[0].FORM_FIELDS_READONLY??""),r=T(i);return c?e.jsx(k,{...l}):m||r.has(n.name.replace("Table1[0].",""))?e.jsx(B,{...l}):e.jsx(G,{...l})};export{X as default};
//# sourceMappingURL=NumberField-Dt-cvBqq.js.map
