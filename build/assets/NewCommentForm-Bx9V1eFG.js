import{k as m,h as u,o as t,p as d,f as h,ap as C,aG as F,F as g,bd as v,a4 as x,be as p,s as I}from"./index-BACowgRs.js";function j(){const{t:a}=d(),{currentUser:n,configuration:r}=m(),c=h(),o=C({defaultValues:{comment:""},validators:{onSubmit:F({comment:"string > 5"})}});return t.jsx(o.Field,{name:"comment",children:s=>{const i=async()=>{(await o.validateField("comment","submit")).length<1&&(c.insertValue(0,{Type:"COMMENT",Author:n.CommonName,UserName:n.UserName,Directory:n.Directory,Created:I().toISOString(),ProcessInstId:r.WF_PROCESS_INST_ID,ProcessName:r.WF_PROCESS_NAME,ActivityInstId:r.WF_ACTIVITY_ID,ActivityName:r.WF_ACTIVITY_NAME,Comment:s.state.value}),o.reset())};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"",children:[t.jsx(g,{hint:a("Shift-Enter for a new line"),validationMessage:s.state.meta.isTouched&&s.state.meta.errors.length>0?a(s.state.meta.errors.join(", "),{field:"",length:6,actual:s.state.value.length}):null,children:t.jsx(v,{resize:"vertical",onKeyDown:e=>{e.key==="Enter"&&(e.shiftKey||(e.preventDefault(),i()))},value:s.state.value,onChange:e=>s.handleChange(e.target.value)})}),t.jsx(o.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,l])=>t.jsx(x,{disabled:!e||l,appearance:"transparent",icon:t.jsx(p,{}),onClick:i,children:a("Add Comment")})})]})})}})}const S=()=>{const{isArchive:a}=m(),{printForm:{state:{values:{open:n}}}}=u();return!a&&!n?t.jsx(j,{}):null};export{S as default};
//# sourceMappingURL=NewCommentForm-Bx9V1eFG.js.map
