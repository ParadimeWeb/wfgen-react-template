import{p as l,k as u,f as d,ap as h,aG as C,o as t,F as g,be as F,a4 as v,bf as x,s as I}from"./index-V1xOnHq0.js";const S=()=>{const{t:r}=l(),{currentUser:o,configuration:s}=u(),m=d(),n=h({defaultValues:{comment:""},validators:{onSubmit:C({comment:"string > 5"})}});return t.jsx(n.Field,{name:"comment",children:a=>{const i=async()=>{(await n.validateField("comment","submit")).length<1&&(m.insertValue(0,{Type:"COMMENT",Author:o.CommonName,UserName:o.UserName,Directory:o.Directory,Created:I().toISOString(),ProcessInstId:s.WF_PROCESS_INST_ID,ProcessName:s.WF_PROCESS_NAME,ActivityInstId:s.WF_ACTIVITY_ID,ActivityName:s.WF_ACTIVITY_NAME,Comment:a.state.value}),n.reset())};return t.jsxs(t.Fragment,{children:[t.jsx(g,{hint:r("Shift-Enter for a new line"),validationMessage:a.state.meta.isTouched&&a.state.meta.errors.length>0?r(a.state.meta.errors.join(", "),{field:"",length:6,actual:a.state.value.length}):null,children:t.jsx(F,{resize:"vertical",onKeyDown:e=>{e.key==="Enter"&&(e.shiftKey||(e.preventDefault(),i()))},value:a.state.value,onChange:e=>a.handleChange(e.target.value)})}),t.jsx(n.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,c])=>t.jsx("div",{children:t.jsx(v,{disabled:!e||c,appearance:"transparent",icon:t.jsx(x,{}),onClick:i,children:r("Add Comment")})})})]})}})};export{S as default};
//# sourceMappingURL=NewCommentForm-CLTtMfSq.js.map
