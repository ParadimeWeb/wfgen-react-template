import{f as S,h as P,k as I,l as A,n as T,o as e,p as D,F as N,T as y,m as U,Z as w,aE as M,aF as Q,ap as Y,aG as C}from"./index-Cd-no0MH.js";import{usePrintStyles as O}from"./TextField-BuANWBbt.js";import"./typographyStyles-HgC6j1Wu.js";function k(l){const{printFieldProps:n=l.fieldProps,printTextProps:h={},style:c="decimal",currency:m="USD"}=l,i=O(),{t:r}=D(),s=S(),{locale:p}=I(),d=Intl.NumberFormat(p,{style:c,currency:m});return e.jsx(N,{label:r(s.name),...n,children:e.jsx(y,{className:U(i.text,(n==null?void 0:n.size)==="small"&&i.small,(n==null?void 0:n.size)==="large"&&i.large,h.className),children:s.state.value===null?"":d.format(s.state.value)})})}function B(l){var b,v;const{readonlyFieldProps:n=l.fieldProps,readonlyInputProps:h={},style:c="decimal",currency:m="USD"}=l,i=O(),{t:r}=D(),s=S(),{locale:p}=I(),{form:d}=P(),t=Intl.NumberFormat(p,{style:c,currency:m}).formatToParts(),g=((b=t.find(o=>o.type==="currency"))==null?void 0:b.value)??"",F=((v=t.find(o=>o.type==="percentSign"))==null?void 0:v.value)??"",x=Intl.NumberFormat(p,{style:c,currency:m});return e.jsx(d.Subscribe,{selector:o=>o.values.Table1[0].FORM_FIELDS_REQUIRED,children:o=>{const u=T(o).has(s.name.replace("Table1[0].",""));return e.jsx(N,{required:u,label:r(s.name),...n,children:e.jsx(w,{readOnly:!0,className:i.readonly,contentAfter:c==="currency"?e.jsx(y,{size:400,children:g}):c==="percent"?e.jsx(y,{size:400,children:F}):e.jsx(M,{}),defaultValue:s.state.value===null?"":x.format(s.state.value),...h})})}})}function G(l){var V,E;const{fieldProps:n={},readonlyFieldProps:h,readonlyInputProps:c,printFieldProps:m,printTextProps:i,style:r="decimal",currency:s="USD",...p}=l,{t:d}=D(),t=S(),{locale:g}=I(),{form:F}=P(),x=Intl.NumberFormat(g,{style:r,currency:s}).formatToParts(),b=((V=x.find(a=>a.type==="currency"))==null?void 0:V.value)??"",v=((E=x.find(a=>a.type==="percentSign"))==null?void 0:E.value)??"",o=Intl.NumberFormat(g,r==="currency"?{maximumFractionDigits:2,minimumFractionDigits:2}:r==="percent"?{maximumFractionDigits:0,minimumFractionDigits:0}:void 0),R=new Q(g),u=t.state.value===null?null:r==="percent"?t.state.value*100:t.state.value,q=Y({defaultValues:{formattedValue:u===null?"":o.format(u)},validators:{onChange:C({formattedValue:C.string.narrow(a=>{if(a.length===0)return t.handleChange(null),!0;const j=R.tryParse(a);return j===void 0?!1:(t.handleChange(r==="percent"?j/100:j),!0)}).configure({message:a=>d("{{actual}} is not a valid number",{actual:a.actual})})})}});return e.jsx(F.Subscribe,{selector:a=>a.values.Table1[0].FORM_FIELDS_REQUIRED,children:a=>{const z=T(a).has(t.name.replace("Table1[0].",""));return e.jsx(q.Field,{name:"formattedValue",children:f=>{var _;return e.jsx(N,{required:z,label:d(t.name),validationMessage:f.state.meta.isTouched&&f.state.meta.errors.length?(_=f.state.meta.errors[0])==null?void 0:_.message:t.state.meta.isTouched&&t.state.meta.errors.length>0?d(t.state.meta.errors[0],{length:t.state.meta.errors[0].rule,actual:f.state.value.length}):null,...n,children:e.jsx(w,{contentAfter:r==="currency"?e.jsx(y,{size:400,children:b}):r==="percent"?e.jsx(y,{size:400,children:v}):e.jsx(M,{}),value:f.state.value,onBlur:()=>{F.state.isValid&&u!==null&&(Number.isInteger(u)||(r==="percent"?t.setValue(Math.round(u)/100):r==="currency"&&u.toString().split(".")[1].length>2&&t.setValue(Math.round(u*100)/100)),f.setValue(o.format(u)))},onChange:(W,{value:L})=>{f.handleChange(L)},...p})})}})}})}const K=l=>{const n=S(),{form:h,printForm:{state:{values:{open:c}}}}=P(),{isArchive:m}=I(),i=A(h.store,s=>s.values.Table1[0].FORM_FIELDS_READONLY??""),r=T(i);return c?e.jsx(k,{...l}):m||r.has(n.name.replace("Table1[0].",""))?e.jsx(B,{...l}):e.jsx(G,{...l})};export{K as default};
//# sourceMappingURL=NumberField-FDMNdIf4.js.map
