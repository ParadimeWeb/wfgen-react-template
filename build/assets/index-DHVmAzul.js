import{q as C,p as y,k as x,h as R,o as e,s as g,m as d,aQ as I,v as p,aR as v,aS as D,aT as N,w as n,f as M,aU as P,aV as U}from"./index-Cd-no0MH.js";import{A as j}from"./Avatar-CGgVjGo2.js";import{C as m,a as b}from"./ChatMessage-G1xGA11l.js";import"./AvatarContext-xE3e238U.js";import"./useFocusableGroup-B_GrMdh1.js";const L=C({chatMessage:{whiteSpace:"pre-wrap"},chatPendingMessage:{borderLeftColor:n.colorNeutralForeground4},chatPendingDecorationIcon:{backgroundColor:n.colorNeutralForeground2},chatPendingDecorationLabel:{color:n.colorNeutralForeground3},chatRejectionMessage:{borderLeftColor:n.colorPaletteRedBorder1},chatRejectionDecorationIcon:{backgroundColor:n.colorPaletteRedBackground3},chatRejectionDecorationLabel:{color:n.colorPaletteRedForeground1},chatApprovalMessage:{borderLeftColor:n.colorPaletteGreenBorder1},chatApprovalDecorationIcon:{backgroundColor:n.colorPaletteGreenBackground3},chatApprovalDecorationLabel:{color:n.colorPaletteGreenForeground1},otherChatMessage:{paddingTop:"2px",paddingBottom:"2px"}});function A({comments:o,approval:a}){const t=L(),{timeZoneInfo:c}=x(),h=a.ApprovedByUserName??a.ApproverUserName??"";return e.jsx(b,{children:o.map((r,s)=>r.Type==="REJECTION"?e.jsx(m,{root:{className:t.otherChatMessage},body:{className:d(t.chatMessage,t.chatRejectionMessage)},author:h!==r.UserName?r.Author:null,decorationLabel:{className:t.chatRejectionDecorationLabel},decorationIcon:{className:t.chatRejectionDecorationIcon,children:e.jsx(N,{})},timestamp:g(r.Created).utcOffset(c.UTCOffset).format("LLL"),children:r.Comment},`chatMessage-${s}`):e.jsx(m,{root:{className:t.otherChatMessage},body:{className:d(t.chatMessage,t.chatApprovalMessage)},author:h!==r.UserName?r.Author:null,decorationLabel:{className:t.chatApprovalDecorationLabel},decorationIcon:{className:t.chatApprovalDecorationIcon,children:e.jsx(N,{})},timestamp:g(r.Created).utcOffset(c.UTCOffset).format("LLL"),children:r.Comment},`chatMessage-${s}`))})}const F=({approval:o})=>{const a=L(),{t}=y(),{timeZoneInfo:c}=x(),{form:h}=R(),r=o.ApprovedByName??o.ApproverName??t("Unassigned"),s=o.ApprovedByDirectory??o.ApproverDirectory??null;return e.jsx(h.Subscribe,{selector:l=>l.values.__Comments.filter(i=>i.Role===o.Role),children:l=>{const i=l.find(f=>f.ActivityInstId===o.ActivityInstId),u=l.filter(f=>f.ActivityInstId!==o.ActivityInstId);return o.Approval==="APPROVED"?e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatApprovalMessage)},avatar:e.jsx(j,{name:r,color:s?p.get(s):"neutral"}),author:r,decorationLabel:{className:a.chatApprovalDecorationLabel,children:o.ApprovedByUserName===o.ApproverUserName?t("Approved"):t("Approved on behalf of {{ name }}",{name:o.ApproverName})},decorationIcon:{className:a.chatApprovalDecorationIcon,children:e.jsx(I,{})},timestamp:g(o.Approved).utcOffset(c.UTCOffset).format("LLL"),children:i?i.Comment:""}),u.length>0?e.jsx(A,{comments:u,approval:o}):null]}):o.Approval==="REJECTED"?e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatRejectionMessage)},avatar:e.jsx(j,{name:r,color:s?p.get(s):"neutral"}),author:r,decorationLabel:{className:a.chatRejectionDecorationLabel,children:o.ApprovedByUserName===o.ApproverUserName?t("Rejected"):t("Rejected on behalf of {{ name }}",{name:o.ApproverName})},decorationIcon:{className:a.chatRejectionDecorationIcon,children:e.jsx(v,{})},timestamp:g(o.Approved).utcOffset(c.UTCOffset).format("LLL"),children:i?i.Comment:""}),u.length>0?e.jsx(A,{comments:u,approval:o}):null]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatPendingMessage)},avatar:e.jsx(j,{name:r,color:s?p.get(s):"neutral"}),author:r,decorationLabel:{className:a.chatPendingDecorationLabel,children:t("Pending")},decorationIcon:{className:a.chatPendingDecorationIcon,children:e.jsx(D,{})}}),l.length>0?e.jsx(A,{comments:l,approval:o}):null]})}})},O=C({root:{width:"unset"}}),w=()=>{const o=O();return M().state.value.map((t,c)=>e.jsxs(e.Fragment,{children:[e.jsx(P,{children:U(t.Role)}),e.jsx(b,{className:o.root,children:e.jsx(F,{approval:t})})]},c))};export{w as default};
//# sourceMappingURL=index-DHVmAzul.js.map
