import{Y as m,d as w,b as E,z as R,B as z}from"./index-CxQz-Nbr.js";import{c as H,g as O}from"./useTriggerSlot-D52XwsSM.js";function Y(s,C,d){"use no memo";const{state:{open:a,value:f,selectOption:D,setValue:p,multiselect:v,selectedOptions:k,clearSelection:x,getOptionById:c,setOpen:L},freeform:T,defaultProps:b,activeDescendantController:i}=d,A=t=>{if(!a&&!T){const e=i.active(),n=e?c(e):null;f&&n&&f.trim().toLowerCase()===(n==null?void 0:n.text.toLowerCase())&&D(t,n),p(void 0)}},B=t=>{const e=t==null?void 0:t.trim().toLowerCase();if(!e||e.length===0){i.blur();return}const n=u=>u.toLowerCase().indexOf(e)===0,g=i.find(u=>{const h=c(u);return!!h&&n(h.text)});if(!g){i.blur();return}return c(g)},S=t=>{const e=t.target.value;p(e);const n=B(e);!v&&k.length===1&&(e.length<1||!n)&&x(t)},o=H(s,C,{state:d.state,defaultProps:b,elementType:"input",activeDescendantController:i});o.onChange=m(o.onChange,S),o.onBlur=m(o.onBlur,A);const[I,y]=w.useState(!1),l=w.useRef(!1),r=o.onKeyDown,K=E(t=>{!a&&O(t)==="Type"&&L(t,!0),t.key===R||t.key===z?y(!0):y(!1);const e=O(t,{open:a,multiselect:v});if(e==="Type"?l.current=!0:(e==="Open"&&t.key!==" "||e==="Next"||e==="Previous"||e==="First"||e==="Last"||e==="PageUp"||e==="PageDown")&&(l.current=!1),(l.current||!a)&&t.key===" "){var n;s==null||(n=s.onKeyDown)===null||n===void 0||n.call(s,t);return}r==null||r(t)});return o.onKeyDown=K,I&&(o["aria-activedescendant"]=void 0),o}export{Y as u};
//# sourceMappingURL=useInputTriggerSlot-DldYs369.js.map
