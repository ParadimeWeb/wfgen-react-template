import{q as C,p as y,k as x,h as R,o as e,s as u,m as d,aM as I,v as p,aN as v,aO as D,aP as N,w as r,f as M,aQ as P,aR as U}from"./index-CxQz-Nbr.js";import{A as j}from"./Avatar-jddRM151.js";import{C as m,a as b}from"./ChatMessage-CLAiwnGf.js";import"./AvatarContext-D205NE7a.js";const L=C({chatMessage:{whiteSpace:"pre-wrap"},chatPendingMessage:{borderLeftColor:r.colorNeutralForeground4},chatPendingDecorationIcon:{backgroundColor:r.colorNeutralForeground2},chatPendingDecorationLabel:{color:r.colorNeutralForeground3},chatRejectionMessage:{borderLeftColor:r.colorPaletteRedBorder1},chatRejectionDecorationIcon:{backgroundColor:r.colorPaletteRedBackground3},chatRejectionDecorationLabel:{color:r.colorPaletteRedForeground1},chatApprovalMessage:{borderLeftColor:r.colorPaletteGreenBorder1},chatApprovalDecorationIcon:{backgroundColor:r.colorPaletteGreenBackground3},chatApprovalDecorationLabel:{color:r.colorPaletteGreenForeground1},otherChatMessage:{paddingTop:"2px",paddingBottom:"2px"}});function A({comments:o,approval:a}){const t=L(),{timeZoneInfo:n}=x(),h=a.ApprovedByUserName??a.ApproverUserName??"";return e.jsx(b,{children:o.map((s,c)=>s.Type==="REJECTION"?e.jsx(m,{root:{className:t.otherChatMessage},body:{className:d(t.chatMessage,t.chatRejectionMessage)},author:h!==s.UserName?s.Author:null,decorationLabel:{className:t.chatRejectionDecorationLabel},decorationIcon:{className:t.chatRejectionDecorationIcon,children:e.jsx(N,{})},timestamp:u(s.Created).utcOffset(n.UTCOffset).format("LLL"),children:s.Comment},`chatMessage-${c}`):e.jsx(m,{root:{className:t.otherChatMessage},body:{className:d(t.chatMessage,t.chatApprovalMessage)},author:h!==s.UserName?s.Author:null,decorationLabel:{className:t.chatApprovalDecorationLabel},decorationIcon:{className:t.chatApprovalDecorationIcon,children:e.jsx(N,{})},timestamp:u(s.Created).utcOffset(n.UTCOffset).format("LLL"),children:s.Comment},`chatMessage-${c}`))})}const F=({approval:o})=>{const a=L(),{t}=y(),{timeZoneInfo:n}=x(),{form:h}=R(),s=o.ApprovedByName??o.ApproverName??t("Unassigned"),c=o.ApprovedByDirectory??o.ApproverDirectory??"";return e.jsx(h.Subscribe,{selector:l=>l.values.__Comments.filter(i=>i.Role===o.Role),children:l=>{const i=l.find(f=>f.ActivityInstId===o.ActivityInstId),g=l.filter(f=>f.ActivityInstId!==o.ActivityInstId);return o.Approval==="APPROVED"?e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatApprovalMessage)},avatar:e.jsx(j,{name:s,color:p.get(c)}),author:s,decorationLabel:{className:a.chatApprovalDecorationLabel,children:o.ApprovedByUserName===o.ApproverUserName?t("Approved"):t("Approved on behalf of {{ name }}",{name:o.ApproverName})},decorationIcon:{className:a.chatApprovalDecorationIcon,children:e.jsx(I,{})},timestamp:u(o.Approved).utcOffset(n.UTCOffset).format("LLL"),children:i?i.Comment:""}),g.length>0?e.jsx(A,{comments:g,approval:o}):null]}):o.Approval==="REJECTED"?e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatRejectionMessage)},avatar:e.jsx(j,{name:s,color:p.get(c)}),author:s,decorationLabel:{className:a.chatRejectionDecorationLabel,children:o.ApprovedByUserName===o.ApproverUserName?t("Rejected"):t("Rejected on behalf of {{ name }}",{name:o.ApproverName})},decorationIcon:{className:a.chatRejectionDecorationIcon,children:e.jsx(v,{})},timestamp:u(o.Approved).utcOffset(n.UTCOffset).format("LLL"),children:i?i.Comment:""}),g.length>0?e.jsx(A,{comments:g,approval:o}):null]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{body:{className:d(a.chatMessage,a.chatPendingMessage)},avatar:e.jsx(j,{name:s,color:p.get(c)}),author:s,decorationLabel:{className:a.chatPendingDecorationLabel,children:t("Pending")},decorationIcon:{className:a.chatPendingDecorationIcon,children:e.jsx(D,{})}}),l.length>0?e.jsx(A,{comments:l,approval:o}):null]})}})},O=C({root:{width:"unset"}}),E=()=>{const o=O();return M().state.value.map((t,n)=>e.jsxs(e.Fragment,{children:[e.jsx(P,{children:U(t.Role)}),e.jsx(b,{className:o.root,children:e.jsx(F,{approval:t})})]},n))};export{E as default};
//# sourceMappingURL=index-B1Gqa09X.js.map
